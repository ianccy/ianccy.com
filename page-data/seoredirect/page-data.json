{"componentChunkName":"component---src-templates-post-tsx","path":"/seoredirect/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu"}},"markdownRemark":{"id":"9aaae7ce-759a-5217-9751-db71aa15ffe4","excerpt":"SEO 優化，是眾多細節的組成的，不光光只是設定好 title 而已，還有網站架構、速度、後端設定處理等等，包含非常多項目，對開發人員來說，不論是設計、前端、後端都需要注意。  假設一個網站改版更新，大概會有幾個需求，前端畫面修改、網址架構更新、增加欄位修改 api…","html":"<p>SEO 優化，是眾多細節的組成的，不光光只是設定好 title 而已，還有網站架構、速度、後端設定處理等等，包含非常多項目，對開發人員來說，不論是設計、前端、後端都需要注意。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9df8d308625a497564d6e95a6ae4a753/acfc1/google_search.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.505050505050505%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuElEQVQoz42RsQrCQAyG+/5P4eTi7OxiF0XBRcRFq7UiXE+t5s7TJL9wiIi02g8SsnzhD0nQhAIaS+NcR1JjKVxQtCD50gDsjzJYolgU2IzcZTvKbDZL4W/6R47dXmScYz2cY9rNd5NOalf9Hs4nfa//ERtAeMRToeHBh7O+HdFfsV/UbmRm7++NskSY2TlHRCEE7/2VyDnHzCKiIn9iM3NZlsYYIqqqyhhjrWXmVq9qT6PcdPmn/ASSyk11Dznl0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9df8d308625a497564d6e95a6ae4a753/a805d/google_search.webp 495w,\n/static/9df8d308625a497564d6e95a6ae4a753/6ec60/google_search.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9df8d308625a497564d6e95a6ae4a753/b3db0/google_search.png 495w,\n/static/9df8d308625a497564d6e95a6ae4a753/acfc1/google_search.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9df8d308625a497564d6e95a6ae4a753/acfc1/google_search.png\"\n            alt=\"google search\"\n            title=\"google search\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">google search</figcaption>\n  </figure></p>\n<p>假設一個網站改版更新，大概會有幾個需求，前端畫面修改、網址架構更新、增加欄位修改 api 等等。</p>\n<p>前端需要注意畫面更新方式，如果是不變化網址(SPA)，內容是經由互動產生內容，那互動產生內容同時，就要有對應的網址參數(window.history.pushState)，然後這些網址要能夠請求拿到各自對應的內容。每個對應的網址參數在列在 sitemap 上，讓 google 有辦法索引。</p>\n<h2 id=\"rediect-轉址介紹\" style=\"position:relative;\"><a href=\"#rediect-%E8%BD%89%E5%9D%80%E4%BB%8B%E7%B4%B9\" aria-label=\"rediect 轉址介紹 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>rediect 轉址介紹</h2>\n<p>更換網址架構的話，假設你有個賣蘋果的頁面網址是 domain/product/apple，在 google 搜尋上 <code class=\"language-text\">網購蘋果</code> 是第一名，但如果改版後網址要變成 domain/product/freshapple，有個重點非常重要，千萬要記得做轉址。否則 product/apple <code class=\"language-text\">網購蘋果</code> 的排名就會歸零。</p>\n<p>白話來說，轉址的概念大概是宣告這個頁面要搬家到另一個頁面的意思，也可以跨 domain 轉。</p>\n<h2 id=\"轉址方法\" style=\"position:relative;\"><a href=\"#%E8%BD%89%E5%9D%80%E6%96%B9%E6%B3%95\" aria-label=\"轉址方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>轉址方法</h2>\n<p>依照不同後端語言，各有不同的轉址寫法，但邏輯上都是一樣的，大概分為 301、302、307。</p>\n<h3 id=\"rediect-轉址狀態碼\" style=\"position:relative;\"><a href=\"#rediect-%E8%BD%89%E5%9D%80%E7%8B%80%E6%85%8B%E7%A2%BC\" aria-label=\"rediect 轉址狀態碼 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>rediect 轉址狀態碼</h3>\n<ul>\n<li>301 狀態碼表示網頁已永久遷移至新的位置</li>\n<li>302 狀態瑪表示網頁暫時導向新位置</li>\n<li>307 狀態瑪表示暫時導向新位置，但是保持使用者請求方式不變</li>\n</ul>\n<p>Node.js express 301 語法</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token number\">301</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http://example.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a href=\"https://support.google.com/webmasters/answer/93633?hl=zh-Hant\" title=\"google 301 rediect 介紹\">google 301 rediect 介紹</a></p>\n<h2 id=\"哪些網址需要做-redirect\" style=\"position:relative;\"><a href=\"#%E5%93%AA%E4%BA%9B%E7%B6%B2%E5%9D%80%E9%9C%80%E8%A6%81%E5%81%9A-redirect\" aria-label=\"哪些網址需要做 redirect permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>哪些網址需要做 redirect</h2>\n<p><a href=\"http://www.domain.com\">www.domain.com</a> 跟 domain.com 就會被 google 是為兩個網站，這時候你可以用 301 轉址處理，避免網站同時存在各種 url 顯示相同網址。\n(domain 網站就有做 domain.com redirect to <a href=\"http://www.domain.com\">www.domain.com</a>)</p>\n<p>網站同時存在 https:// http:// 兩種可以被訪問，也需要做轉址，假設網址結尾帶有或是無 .php .jsp，也需要指定一個做 301redirect。</p>\n<p>需不需要轉址核心概念就是，這個頁面的內容，只有一個網址可以顯示。</p>\n<p>但是如果今天網址需要帶參數怎辦(utm、gdn)? 這時候就需要 canonical tag。(後半段介紹)</p>\n<h2 id=\"轉址缺點後遺症\" style=\"position:relative;\"><a href=\"#%E8%BD%89%E5%9D%80%E7%BC%BA%E9%BB%9E%E5%BE%8C%E9%81%BA%E7%97%87\" aria-label=\"轉址缺點後遺症 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>轉址缺點、後遺症</h2>\n<p>三年前工作經驗，使用 301 轉址，新網址的關鍵字排名<code class=\"language-text\">一定</code>會掉落排名，大概過了一兩週後才會慢慢回升，我會用一定是因為 john muller(google webmaster 發言人)也確實發表過掉落些許排名這件事情。</p>\n<p>但 2016 年時 google’s Gary Illyes 表示 30x 不在會掉落 PageRank。在今年，我的 blog 有做過 301 轉址，大概一兩天之後，在搜尋結果上，新網址會取代舊網址，排名完全沒有變動。</p>\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 36.36363636363637%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <iframe border=\"0\" frameborder=\"0\" src=\"https://twitframe.com/show?url=https://twitter.com/methode/status/757923179641839616?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E757923179641839616&amp;ref_url=https%3A%2F%2Fmoz.com%2Fblog%2F301-redirection-rules-for-seo\" style=\" position: absolute; top: 0; left: 0; width: 100%; height: 100%; \"></iframe> </div>\n<h2 id=\"canonical-介紹\" style=\"position:relative;\"><a href=\"#canonical-%E4%BB%8B%E7%B4%B9\" aria-label=\"canonical 介紹 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>canonical 介紹</h2>\n<p>如果你網站沒辦法經由 301 處理，讓同個頁面有多個網址可以載入取得，或是有重複性內容處理的問題，那你就需要使用 canonical 處理，你可以用 html 的 link 處理。指定目前網址的搜尋權重指派到哪個網址。或是在 server response header 加上 rel=canonical。</p>\n<p>另外 sitemap 也可以指定索引的網址，但效力會被 canonical 蓋過。</p>\n<ul>\n<li>網址為 <a href=\"https://example.com/apple?user=ianchuu\">https://example.com/apple?user=ianchuu</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>link rel<span class=\"token operator\">=</span><span class=\"token string\">\"canonical\"</span> href<span class=\"token operator\">=</span><span class=\"token string\">\"https://example.com/apple\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li>google 重複性內容處理</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">如果您有某一個網頁可透過多個網址存取，或是不同網頁上存在相似的內容</span> <span class=\"token punctuation\">(</span>例如同時有行動版和桌面版網頁<span class=\"token punctuation\">)</span>，Google 會將這些網頁視為相同網頁的重複版本，從中選出一個網址做為「標準」版本並檢索該網址，其他網址則會被視為「重複」網址，檢索頻率會比較低。</code></pre></div>\n<p><a href=\"https://support.google.com/webmasters/answer/139066?visit_id=636808323796527838-1214345128&#x26;rd=1\" title=\"google 整合重複的網址\">google 整合重複的網址</a></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>這邊大部分觀念都圍繞在更換網址、處理重複性內容。</p>\n<p>一般網站很高機會遇到重複性內容的問題，因為前端或是後端需要網址參數來變化內容，記得，如果網址有帶參數，但是有沒有帶網頁內容都一樣，就記得加上 canonical，直接指定一個網址讓 google 指派權重。</p>\n<p>但如果網址有帶參數，但是內容不一樣就要列在 sitemap 上或是產生個內部連結，如果沒有做的話，就浪費這個頁面被索引的機會了。</p>\n<p>感謝閱讀，有問題歡迎留言!</p>","fields":{"readingTime":{"text":"6 min read"}},"frontmatter":{"title":"SEO 301、302轉址Redirect，canonical tag重複內容處理","date":"December 19, 2018","description":"轉址的概念，大概是宣告這個頁面要搬家到另一個頁面的意思，依照不同後端語言，各有不同的轉址寫法，但邏輯上都是一樣的，大概分為 301、302、307。若是有重複性內容處理的問題，那你就需要使用canonical處理。","categories":"marketing","tags":["seo"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/9df8d308625a497564d6e95a6ae4a753/5c673/google_search.png","srcSet":"/static/9df8d308625a497564d6e95a6ae4a753/4f0c9/google_search.png 200w,\n/static/9df8d308625a497564d6e95a6ae4a753/855ac/google_search.png 400w,\n/static/9df8d308625a497564d6e95a6ae4a753/5c673/google_search.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/9df8d308625a497564d6e95a6ae4a753/0db70/google_search.webp 200w,\n/static/9df8d308625a497564d6e95a6ae4a753/66a52/google_search.webp 400w,\n/static/9df8d308625a497564d6e95a6ae4a753/6b941/google_search.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":1280,"height":646.4}}},"image":{"publicURL":"/static/9df8d308625a497564d6e95a6ae4a753/google_search.png"}}},"previous":{"fields":{"slug":"/2018-12-nextupdate/"},"frontmatter":{"title":"Update Next.js 7、react 16 error and bug"}},"next":{"fields":{"slug":"/2019-01-reactssr/"},"frontmatter":{"title":"React Server-side rendering SEO處理"}}},"pageContext":{"id":"9aaae7ce-759a-5217-9751-db71aa15ffe4","previousPostId":"bea1de82-0185-566a-a458-8c96d5f2904d","nextPostId":"20d27da2-d557-5981-8a2d-bd1a2def444f"}},"staticQueryHashes":["3649515864","3761976949","441988385"]}