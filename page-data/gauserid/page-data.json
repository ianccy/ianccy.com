{"componentChunkName":"component---src-templates-post-tsx","path":"/gauserid/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu"}},"markdownRemark":{"id":"4a0f4fd6-c622-5c40-87a8-78f33334aae6","excerpt":"分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。 Goolge 說明: 設定 User ID GA 設定 User ID GA…","html":"<p>分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。</p>\n<p>Goolge 說明: <a href=\"https://support.google.com/analytics/answer/3123666?hl=zh-Hant\" title=\"設定 User ID\">設定 User ID</a></p>\n<h2 id=\"ga-設定-user-id\" style=\"position:relative;\"><a href=\"#ga-%E8%A8%AD%E5%AE%9A-user-id\" aria-label=\"ga 設定 user id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GA 設定 User ID</h2>\n<p>GA 點選左下角設定 => 點選 追蹤設定 => 點選 User Id => 點擊 同意條款 => 點選 下一步\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.63636363636364%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABC0lEQVR42oWQ2W6EMAxF+f8v61MfEB2xI0FZBLQsmUKACdOTiUTLqFItY+H4Xvva1iiuQggpl2VZ8XXdtu1GxBcdNv2mUx0N5nAL7DzP+77fHzZNE72UUrrHL1M7b+qAGbMMGigFKSU/URSlaVqWZdM0xKqqiEVRZFkGGM7RwqLfKASaeEICqe/7nue5rhsEweVyeXuY4zikdD9N5uu7ztCIKIzjGCYE27YhwwnDMEmSPM/N5BO5a9uPtmVHKXWLvCgZjkjU1nU9DEPf9+M4dl3HVU9k1LIzZQqcXE6iqd5JkWDW+7nZnwejNztTvG1LUn058edRfkI/mQWNyahSGqdeg+HFE5p1/9++AS0RBWVxm8FPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a4dfd573d871922286d5fe915a26c191/a805d/gasettinguid.webp 495w,\n/static/a4dfd573d871922286d5fe915a26c191/6ec60/gasettinguid.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a4dfd573d871922286d5fe915a26c191/b3db0/gasettinguid.png 495w,\n/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n            alt=\"gasettinguid\"\n            title=\"gasettinguid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure></p>\n<p>建立 User Id 報表\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.43434343434343%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVR42pWSC2/BYBSG/f+fJIJtcYuIULYqqtU2qEvvF1q2x9cYlmXJ3sTJOdrnXF5Kmu2GvheG4ef/VTI2+629cV0XnhgEweFw8DyvKKMo+gtO03S73e52O5i9EEAiRJIKnW46Ho/n8/kOg1Wr1Uaj0W63m81mp9ORZXk8HiuKMp/PJUkiDodDkg8heoFdLpcrbNt2q9Xq9/uQtVqt2+1WKpVyuUzO9/V6HfJdCJ6mTzDbMq3X6w0GA95joKqqpmkyUNM0wzCIlmXhAnbgAsvf1/Z9nz2n02kReZWzHccpLCAJhQIhWjzBNINZLpdgnHTtMpkwEBfX6zWOwDDgd5h6NpupN02FVqsVcOH8o+B/rq3rOmO5lkgjEuGrzAfeFWJ/Irc8wUkcW6bJ/DzPsyzjWSZUlN/Kr/WJx0+/89I0X17fRpK0WCwYRWQRktFoxBZ4zi0kE0WRVUO3Vuc8v8O6c+xbYRJHnnd1JY7jwhvO4UhKrE7SJAyjIMmSU/749/wCLNvQgpAV0lMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/a805d/gasettinguid2.webp 495w,\n/static/5a7cebbd6db9e4581aaa4402d4d0a360/6ec60/gasettinguid2.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/b3db0/gasettinguid2.png 495w,\n/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n            alt=\"gasettinguid\"\n            title=\"gasettinguid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure></p>\n<p>打開 顯示 User-id\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.34343434343434%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0klEQVR42pWRyQ6CMBiEef+7D+PZNzAx8WYQSRc0QAuFbtQBghEXAt+hTf90MtNpZIyhlCZJwhjjnAshvPdhHZFzLssyyFStirwAG8TW2jiOCSGvUTew1hmxYTtq/MRa5zRNtdZVVZVliQp+3uv6RF9imAgp8zxHhPWBJ2djGLmhajjXA0oprJXsj+MQk1I2hWiNsTMxl3Z3oHBG4HbAvIHnDLtVrasb95ErarQ9X+njTvHDC2/+E9uFCw+kCLAZS+4WmYmV7vZHe0p8o2o0H7bwBICshjhSv3OBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/406223a191ae9878e9c07cd43fe7e3db/a805d/gauserid3.webp 495w,\n/static/406223a191ae9878e9c07cd43fe7e3db/6ec60/gauserid3.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/406223a191ae9878e9c07cd43fe7e3db/b3db0/gauserid3.png 495w,\n/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n            alt=\"gasettinguid\"\n            title=\"gasettinguid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure></p>\n<p>這邊千萬千萬要記得要打開 UserId 的設定，否則你報表看不到客製化的 UserId 數據。我在這邊卡了 2 小時，查網路還找不到如何顯示的教學…。</p>\n<h2 id=\"針對使用者設定-userid\" style=\"position:relative;\"><a href=\"#%E9%87%9D%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E8%A8%AD%E5%AE%9A-userid\" aria-label=\"針對使用者設定 userid permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>針對使用者設定 UserId</h2>\n<p>接下來就需要定義使用者的 UserId，這邊有時候會用會員編號，不要使用敏感性個資去設定即可，能讓你在報表識別出這個人是誰就可以。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 全域網站代碼的追蹤程式碼 (gtag.js)：</span>\n<span class=\"token function\">gtag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">user_id</span><span class=\"token operator\">:</span> <span class=\"token string\">'USER_ID'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使用已登入的 user_id 設定 User ID。</span>\n\n<span class=\"token comment\">// 通用 Analytics (分析) 追蹤程式碼 (analytics.js)：</span>\n<span class=\"token function\">ga</span><span class=\"token punctuation\">(</span><span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'userId'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'USER_ID'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使用已登入的 user_id 設定 User ID。</span></code></pre></div>\n<h3 id=\"tag-manager-設定流程\" style=\"position:relative;\"><a href=\"#tag-manager-%E8%A8%AD%E5%AE%9A%E6%B5%81%E7%A8%8B\" aria-label=\"tag manager 設定流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tag manager 設定流程</h3>\n<p>稍微提一下 tag manager 設定流程，首先我們需要建立一個變數，因為我 userId 是透過 cookie 傳遞的，所以我這邊先打開<code class=\"language-text\">變數</code>，點選使用者自定義區塊 -> 點選新增。</p>\n<ul>\n<li>選擇自訂 JavaScript</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.74747474747475%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3ElEQVR42o2Q0Y6CMBBF+/8/QqtQrF22+G42YkLUiF+gyT4YAi2LgLTdHSAQ90HjzX2YTnPmTovYcsk5/3iiIAhc10tOSdPUaZpaa39HGWMQpRTYz1G8B6ajEAITvI72TWu1bu1/IRi/CsNQiMFkNmeMTR0oCCFRfKia9nYrH5M7mHEO84ccyCSuv2B8bHTJAH9td5n8qaqq1Rq21b2hRq7nvbBHKcbOerv/vmbnyyVXRZbLXKpMKqkKBNcvTH3fwc4mPpb1HdY2utPw4O7D3oGjOCnKWknZs2aC/wA+OU42BtErswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/a805d/gtmuid.webp 495w,\n/static/9ae56bc7af51877a85929e0cf8f8ee52/6ec60/gtmuid.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/b3db0/gtmuid.png 495w,\n/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n            alt=\"gtm uid\"\n            title=\"gtm uid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm uid</figcaption>\n  </figure></p>\n<ul>\n<li>function return 代表的是這個變數的值。</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.38383838383838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxUlEQVR42p2S6w6DIAyFff9HdcqtgKVUt8PIki0SY3by/SjQw6VlEhFjLTPvR5Pu+x2gWusU8+YpdqyzVRVIrRfkjV0g5DczIkcxpkypYD9s/bxUEfk1B0oIolIg+HvSMRJmuYzMnPI6Y5iMMeR9ZW7ZX+rD8clSSnB4T8w5CbN+rnDHnFGs69denbyr/mUmQrXfpW5qzdQBfX3jMmjVuprHsgDrXG/4kJM5EILZizEwQh4IPkTVM1x+zYhCTIjvgPL0H/kCuVy7YCYbb94AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/df6fcfaf41b9e489faa3d94e8990710a/a805d/gtmuidvar.webp 495w,\n/static/df6fcfaf41b9e489faa3d94e8990710a/6ec60/gtmuidvar.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/df6fcfaf41b9e489faa3d94e8990710a/b3db0/gtmuidvar.png 495w,\n/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n            alt=\"gtm uid js\"\n            title=\"gtm uid js\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm uid js</figcaption>\n  </figure></p>\n<ul>\n<li>點選 <code class=\"language-text\">代碼</code> -> 新增/編輯 GA pageView -> 點選 覆蓋變數設定 -> 點選 更多設定 -> 填入 userId 還有剛剛設定的 變數名稱</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.82828282828282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVR42pWS6W6DQAyEef/H5E8lwt723gudLgmpaELoCCEOfZ6x18NtnoUQUspxHPEopWLmpWt9r7YspdaBOFhiYg4hHoDljfAr56y0GbR1ygD3LZE1Cs7GGK21tbaU8hJuraWUQA3GEXgirsnHGDwCxAis1nqSvDs/YNC3WeDTvaXW1lOh+k/s3ZmZUMM5l1JsXZdgY512/ks4IeZpmogIgRH7qrNxLLSDOZKXrn/EZsakcIWtYczs/JyfsALsPXJu9/WCjs74hBMufeC77Xaqn6bdYWRPue3LgE1AI9iW/KiIQugNle8b9hv2qSpC7OOS/n3dnL8Bqf/6N2W4dqsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/a805d/gtmgauid.webp 495w,\n/static/ede028f1638a83ae4f480cfce3ba9a4a/6ec60/gtmgauid.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/b3db0/gtmgauid.png 495w,\n/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n            alt=\"gtm ga uid\"\n            title=\"gtm ga uid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm ga uid</figcaption>\n  </figure></p>\n<ul>\n<li>完成後 -> 點選提交 (或是 預覽 測試後再提交)\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 761px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.31313131313131%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAx0lEQVR42sWOvQ6CMBRG+9K+jqM+hQ4Obg4mODg4CEhApHBvb+kPArai0WiMg4M3Zzj52u+2zH6epvFcxY8TITAM91rrTbAKdwHTxhrbGGtfqLUF6XFCRIBCGyOkKoG2iRrP00WQM0Ss4BUAzDmEGUQZOEnSLIoTzstjAWmBs/VpNMmmy4IdTpKjcos5YPmEX4EeL4IcQ+4S93klQRKwmJ9RdbJWICTSg6HwzC2/H1WCWN/3XdcJktXb7a8w12zbH8o/vfyf8gUsdDfk7oEY4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/30d28ba4ac2f162672dd87efa004d21d/a805d/gtmgauidsubmit.webp 495w,\n/static/30d28ba4ac2f162672dd87efa004d21d/92222/gtmgauidsubmit.webp 761w\"\n              sizes=\"(max-width: 761px) 100vw, 761px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/30d28ba4ac2f162672dd87efa004d21d/b3db0/gtmgauidsubmit.png 495w,\n/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png 761w\"\n            sizes=\"(max-width: 761px) 100vw, 761px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n            alt=\"gtm ga uid submit\"\n            title=\"gtm ga uid submit\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm ga uid submit</figcaption>\n  </figure></li>\n</ul>\n<p>Tag manager 非常好用，會用的話可以不透過修改線上程式碼，處理許多問題、功能。</p>\n<h2 id=\"實際模擬-userid-設定\" style=\"position:relative;\"><a href=\"#%E5%AF%A6%E9%9A%9B%E6%A8%A1%E6%93%AC-userid-%E8%A8%AD%E5%AE%9A\" aria-label=\"實際模擬 userid 設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>實際模擬 UserId 設定</h2>\n<p>因為 blog 沒有會員系統，就先麻煩到我剛剛建好的頁面，是使用串接 facebook web sdk 登入。</p>\n<p>登入設定 userId : <a href=\"https://work.ianccy.com/getuid.html\" title=\"登入facebook 設定 userId\">登入 facebook 設定 userId</a></p>\n<p>進入畫面點擊登入後，我會把 facebook uId 設定到 cookie，之後我會將 cookie 的這個值，設定到 Google analytics UserId 中。</p>\n<p>因為 cookie 沒設定時間所以關掉視窗就會自動清掉了，別怕 XD。</p>\n<p>UserId google 政策小提醒:\n<code class=\"language-text\">您不會上傳任何能讓 Google 識別個人身分的資料 (例如姓名、身分證字號、電子郵件地址等任何類似資料)，或是可永久識別某裝置的資料 (例如無法重設的手機專屬裝置識別碼)。</code></p>\n<h2 id=\"google-analytics-報表\" style=\"position:relative;\"><a href=\"#google-analytics-%E5%A0%B1%E8%A1%A8\" aria-label=\"google analytics 報表 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Google analytics 報表</h2>\n<p>接下來打開剛剛建立好的 GA 報表，點選 目標對象 -> 客層管理，就可以看到剛剛設定好的 UserId。點擊 UserId 即可看到詳細數據。</p>\n<ul>\n<li>\n<p>UserId 清單\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.18181818181819%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVR42oWQ2W7EIAxF+f8f7EOfpglkG7EEY2MmJfUEpdJImfboCtnIy5WVD2tYI2VOSFr3fa8nb4lZfpoyFy6PLMGvuDQp6/yziAsRzZFuZpqX+ftk2zbmklI6snpIntqkAJIMplwQ0Sz2pk1G3E9qrW3KfoWChM1DhLQGDzGWUvgN4q694kWWqa9OW79aF9xTHohRbFwh1cMwhINxHCVWvTbOuswP8e9imnyS3u0KAGhtslY8S6qW+92PHSMA0nGL/W/qWSGB+jTpo4s25ABU/219PdgPeTTQvzZo9SoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/656c80fc7ad9cae312da246d7ad06f11/a805d/gauseridview.webp 495w,\n/static/656c80fc7ad9cae312da246d7ad06f11/6ec60/gauseridview.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/656c80fc7ad9cae312da246d7ad06f11/b3db0/gauseridview.png 495w,\n/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n            alt=\"ga userid view\"\n            title=\"ga userid view\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">ga userid view</figcaption>\n  </figure></p>\n</li>\n<li>\n<p>使用者紀錄\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 2vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABB0lEQVR42oVRSW7EMAzz/x/Rv/QTPfVUoJlJvcWxvMpLOc6twEwJQvAiShYteu829MJjjM7MrTde6KNXrtzWSWOkPQ57L6UQUVgQrY+39/q5jznq4Rwy7ve70qq1JqU8zzOlROShce7A7XbbQqBaa85J5Jw/vhLlWXJSymzbTSm97xJRSgVqbY2x1h7WuhUPYx7EVqAJeTvnRCWtv537CUGDRCpGE6Ne8S+JpLW70FrjSRBjqJRMCNJ76GVrfs74nIGZhHPuEmNIjBRjWnbg+h/APIFpYoyXGN7EBwIWsKS9RK3l6pwhZq4H7F7w3sPn/ByojhyBDqX0DLcL4zMu/fWTr8Xnef4CWXYHp10BnpwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/a805d/gauseridinfo.webp 495w,\n/static/e03a2a49b60e0bc50b28b7f9459feef3/6ec60/gauseridinfo.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/b3db0/gauseridinfo.png 495w,\n/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n            alt=\"ga userid info\"\n            title=\"ga userid info\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">ga userid info</figcaption>\n  </figure></p>\n</li>\n</ul>\n<p>假設你再搭配資料庫存取會員，就可以直接的看到所有會員的使用路徑，例如說，我希望看到下單的使用者，都看過哪些頁面的路徑，那你就可以依靠這方式觀察。</p>\n<h2 id=\"心得\" style=\"position:relative;\"><a href=\"#%E5%BF%83%E5%BE%97\" aria-label=\"心得 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>心得</h2>\n<p>滿詭異的，一開始報表沒出現 UserId，查網路解決方法查了很久，沒想到國外都說 ga 不會顯示 UserId…，滿臉問號。</p>\n<p>話說這功能我個人是覺得滿好用的，以前服務公司就有導入使用，可以更快理解、觀察出會員的需求，雖然聽起來滿沒有隱私，很怕被追蹤的話，記得開無痕登出瀏覽網站。</p>\n<p>感謝，有問題再歡迎留言詢問。</p>","fields":{"readingTime":{"text":"5 min read"}},"frontmatter":{"title":"Google Analytics 自訂UserId 追蹤數據","date":"June 15, 2019","description":"分享一個google analytics滿好用的功能，設定User Id，可以讓你直接在報表上找出這個使用者的flow，包括停留時間等等詳細數據，假設你搭配會員系統給予id的話，你也能夠跨裝置的追蹤數據。","categories":"marketing","tags":["google_analytics"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/dfeae9b0c0de13cd6ed25543c36e7927/06df8/google_analytics.png","srcSet":"/static/dfeae9b0c0de13cd6ed25543c36e7927/2f882/google_analytics.png 200w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/ede9b/google_analytics.png 400w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/06df8/google_analytics.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/dfeae9b0c0de13cd6ed25543c36e7927/8d68f/google_analytics.webp 200w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/1056e/google_analytics.webp 400w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/a1e0e/google_analytics.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":1280,"height":411.2}}},"image":{"publicURL":"/static/dfeae9b0c0de13cd6ed25543c36e7927/google_analytics.png"}},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#ga-%E8%A8%AD%E5%AE%9A-user-id\">GA 設定 User ID</a></p>\n</li>\n<li>\n<p><a href=\"#%E9%87%9D%E5%B0%8D%E4%BD%BF%E7%94%A8%E8%80%85%E8%A8%AD%E5%AE%9A-userid\">針對使用者設定 UserId</a></p>\n<ul>\n<li><a href=\"#tag-manager-%E8%A8%AD%E5%AE%9A%E6%B5%81%E7%A8%8B\">Tag manager 設定流程</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%AF%A6%E9%9A%9B%E6%A8%A1%E6%93%AC-userid-%E8%A8%AD%E5%AE%9A\">實際模擬 UserId 設定</a></p>\n</li>\n<li>\n<p><a href=\"#google-analytics-%E5%A0%B1%E8%A1%A8\">Google analytics 報表</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%BF%83%E5%BE%97\">心得</a></p>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/2019-07-reactcontextapi/"},"frontmatter":{"title":"React Context API 跨元件傳遞資料"}},"next":{"fields":{"slug":"/2019-06-firstjob/"},"frontmatter":{"title":"第一份工作"}}},"pageContext":{"id":"4a0f4fd6-c622-5c40-87a8-78f33334aae6","previousPostId":"627fdf55-94cf-57d2-8ea0-71a491c2a832","nextPostId":"38e647b7-b809-59fa-8094-06bec65be7a8"}},"staticQueryHashes":["3649515864","3707347541","3761976949"],"slicesMap":{}}