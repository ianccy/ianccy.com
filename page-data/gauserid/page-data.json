{"componentChunkName":"component---src-templates-post-tsx","path":"/gauserid/","result":{"data":{"site":{"siteMetadata":{"title":"Ian Chu"}},"markdownRemark":{"id":"4a0f4fd6-c622-5c40-87a8-78f33334aae6","excerpt":"分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。 Goolge 說明: 設定 User ID GA 設定 User ID GA…","html":"<p>分享一個 google analytics 滿好用的功能，設定 User Id，可以讓你直接在報表上找出這個使用者的 flow，包括停留時間等等詳細數據，假設你搭配會員系統給予 id 的話，你也能夠跨裝置的追蹤數據。</p>\n<p>Goolge 說明: <a href=\"https://support.google.com/analytics/answer/3123666?hl=zh-Hant\" title=\"設定 User ID\">設定 User ID</a></p>\n<h2>GA 設定 User ID</h2>\n<p>GA 點選左下角設定 => 點選 追蹤設定 => 點選 User Id => 點擊 同意條款 => 點選 下一步\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.63636363636364%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHUlEQVQoz42RzW7CMBCE8/4v1XtvqAQnkUEUl8Ygkx+csN71xq7iIAS9tJ9GvnhmVtrNrtfBWuscIhIiEXnvGYlm4euLNLuQHso80Q2ApynEGGIEgGEYQgjMPD0x/y4k26IMAKy13vsQgnOOiHa7nVJKa22M0VqfTyedOB6P4zjG1BITGTNba4koprEhBClllZBSFkUhhNhsNnmeV1UFAC/hGGPfdXC7hRAAgJm3260QYr1er1arPM+FKIqikFIeDur35Bhja8zFGGZeiuu6Lstyv98rpeq6bhN937dt65yLT8xha23TNJhwMJz1lzEXIlpW5b2/34D5MfMeBoCu6xBx9hF+m7H6bOL/yIgIABAxlU7vZf/2cU2H+Dv8AxUrBTjKSLETAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a4dfd573d871922286d5fe915a26c191/a805d/gasettinguid.webp 495w,\n/static/a4dfd573d871922286d5fe915a26c191/6ec60/gasettinguid.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a4dfd573d871922286d5fe915a26c191/b3db0/gasettinguid.png 495w,\n/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a4dfd573d871922286d5fe915a26c191/acfc1/gasettinguid.png\"\n            alt=\"gasettinguid\"\n            title=\"gasettinguid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure></p>\n<p>建立 User Id 報表\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.43434343434343%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvElEQVQoz43Sa4+iMBQGYP//b1ITEhF2I7KKAVpuBZEwILRc5NJy2UzZcTTZTfb50DQnfXtOmq5gXN2zLM/zvu/n/zBN03O/ikmTpGmeZ4/HA2NcliUhJMuykiOEUEr/ddFqnieMcRzHSZLkeZ6maVEUHdc0Tdu2y77nKKWvA66maVJVdbvdiqK42+0EQVAU5Xw+n04nAICmaZfLxTCMZzEIgufwn2FN0w6Hg6IogiDIsixJ0nq93mw2oiju93tZlgEHIdR1PYqit86maUqSdDweVVXVdd2yrCiKrter53m32y0MQ9/30zQty7IoirIsv8PjOIZhaFmW4ziWZbmuG0VRzt3v9+Xlmqapv1RV9RZGCNm27fv+Mhjkki8Y46qqlsf/e2fbthFCrut6ngcAQAh9cISQtm2bF3Vdf4eHYYjjOAgCm0MIQQgBAIZh6Lru+35RFHhBCMa4KIq3zmmShGHIGJvnmTE2DMM4jhM3cIzxMmMDpcuxP+G+pz+PJ0n+4TiOYRgAgCAIIIQXzvM8CKHruqZpmrZnOFdCXjqzcfwVdx9lR7u2rh993y9/a0Ep7bpuWduetWx6/du/ASk70LC2Q53TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/a805d/gasettinguid2.webp 495w,\n/static/5a7cebbd6db9e4581aaa4402d4d0a360/6ec60/gasettinguid2.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/b3db0/gasettinguid2.png 495w,\n/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5a7cebbd6db9e4581aaa4402d4d0a360/acfc1/gasettinguid2.png\"\n            alt=\"gasettinguid\"\n            title=\"gasettinguid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure></p>\n<p>打開 顯示 User-id\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.34343434343434%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0UlEQVQoz5WQS07EMAyGe/8tB0KaMyB2s2kh4HRoPQ552U6CNJUGRQhov4VlW/79GpgZAKZpAgBrLRGVUto+BlWd5xkAQoiIV0Q8IBaRcRyNMbXWLVVv7J1srfXel569YmNMSsk5h4g5599Kfy4zlFKcc+uyqmo7yCDC9u0VAIjIfxOcc977zYYQkOJCkUU6sf2Uh9P75WMVkZQSM8uNzbmHKWtIWvpHDpn1bOxyASKHeJW+939rl3aG9rI24bydXf+kE0euj8/8NGmKnpkPPewLkhKGVdz7kQ8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/406223a191ae9878e9c07cd43fe7e3db/a805d/gauserid3.webp 495w,\n/static/406223a191ae9878e9c07cd43fe7e3db/6ec60/gauserid3.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/406223a191ae9878e9c07cd43fe7e3db/b3db0/gauserid3.png 495w,\n/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/406223a191ae9878e9c07cd43fe7e3db/acfc1/gauserid3.png\"\n            alt=\"gasettinguid\"\n            title=\"gasettinguid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gasettinguid</figcaption>\n  </figure></p>\n<p>這邊千萬千萬要記得要打開 UserId 的設定，否則你報表看不到客製化的 UserId 數據。我在這邊卡了 2 小時，查網路還找不到如何顯示的教學…。</p>\n<h2>針對使用者設定 UserId</h2>\n<p>接下來就需要定義使用者的 UserId，這邊有時候會用會員編號，不要使用敏感性個資去設定即可，能讓你在報表識別出這個人是誰就可以。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 全域網站代碼的追蹤程式碼 (gtag.js)：</span>\n<span class=\"token function\">gtag</span><span class=\"token punctuation\">(</span><span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">user_id</span><span class=\"token operator\">:</span> <span class=\"token string\">'USER_ID'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使用已登入的 user_id 設定 User ID。</span>\n\n<span class=\"token comment\">// 通用 Analytics (分析) 追蹤程式碼 (analytics.js)：</span>\n<span class=\"token function\">ga</span><span class=\"token punctuation\">(</span><span class=\"token string\">'set'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'userId'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'USER_ID'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 使用已登入的 user_id 設定 User ID。</span></code></pre></div>\n<h3>Tag manager 設定流程</h3>\n<p>稍微提一下 tag manager 設定流程，首先我們需要建立一個變數，因為我 userId 是透過 cookie 傳遞的，所以我這邊先打開<code class=\"language-text\">變數</code>，點選使用者自定義區塊 -> 點選新增。</p>\n<ul>\n<li>選擇自訂 JavaScript</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.74747474747475%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3klEQVQY042Q3WrDMAxG/f5P4pjYiVPF8ROs0IwsNI+wDjbYqB3Xcxb/dJAua3dTdjgX0gcSQqgsy6qqNgAXoa5hrS9tTul+GL6mSWsdYzyvpJQQYwwAxMqy59o2TUNI9tD22s4x+PQXtAGQUjYLUkqckZLz24QQ8tj1Jzs551JK5xsQ51zUPwBAlhclr8QaCSEIIdv26e1dWWvn2YcQvF8MAeWU3pEyhjO8bfvn14/Dy0Fpc1Raj6PSozYGUcbuyIoCZ3jXDcfRuU8bF65n/2e47fbKOGNG732M8fdh3+mbTe1Rvz6AAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/a805d/gtmuid.webp 495w,\n/static/9ae56bc7af51877a85929e0cf8f8ee52/6ec60/gtmuid.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/b3db0/gtmuid.png 495w,\n/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9ae56bc7af51877a85929e0cf8f8ee52/acfc1/gtmuid.png\"\n            alt=\"gtm uid\"\n            title=\"gtm uid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm uid</figcaption>\n  </figure></p>\n<ul>\n<li>function return 代表的是這個變數的值。</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.38383838383838%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQoz42SW27EIAxFZ/877SQhBhsbP0iqSaqqauikV+cH42MZiYearStIa9F79O4R/yGim/mDWAApH6xpeV3cjeDWoGBGOuSCUJBYUNzMImJ/GzP7LVeWTIYFPfxs2kbZt02vMjEry/whCeq8zAhgIq/uHzmPY9nUalEk1tbc/br/O/n2tX/Klbn3vt/ZQ5mospm5x0lEj0te9d5FdSDPS3o+p2maU0p2DBimNb2u3abi6wo5Z8gZAPTY5EpTPT/Vl5yRClViJpZvsPKQQvWUPwF1ubshUOL1+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/df6fcfaf41b9e489faa3d94e8990710a/a805d/gtmuidvar.webp 495w,\n/static/df6fcfaf41b9e489faa3d94e8990710a/6ec60/gtmuidvar.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/df6fcfaf41b9e489faa3d94e8990710a/b3db0/gtmuidvar.png 495w,\n/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/df6fcfaf41b9e489faa3d94e8990710a/acfc1/gtmuidvar.png\"\n            alt=\"gtm uid js\"\n            title=\"gtm uid js\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm uid js</figcaption>\n  </figure></p>\n<ul>\n<li>點選 <code class=\"language-text\">代碼</code> -> 新增/編輯 GA pageView -> 點選 覆蓋變數設定 -> 點選 更多設定 -> 填入 userId 還有剛剛設定的 變數名稱</li>\n</ul>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.82828282828282%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7UlEQVQoz52Sy67DIAxE8/9fmS0hbQJ+gQ3kqkGqmj6i6M7CK47GjGdwzk3T5P08jqNzznsPAK1r+6nWtlLqgCxATMTEUms7vviubdvMyhrisEZYQgSkkokghhgBIO7TzH7xOesS4hAA1wfLzSQJIZKI5JxV9WRx1RcYkObbXVW3azKzZQ1PZyIE3JV3z9O8jnAAdjeYZ++c62mXUq7D5BdEhJSSmZ2T7zAxCxMz9wullJ5rf93/HS6liEit9R+BPTxDDJrzR5naJVhErJRnj1Q1pYSI/YSttVpr/5F+wiQ2BWvHetZaX817hbvzH2eA+iljPpxIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/a805d/gtmgauid.webp 495w,\n/static/ede028f1638a83ae4f480cfce3ba9a4a/6ec60/gtmgauid.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/b3db0/gtmgauid.png 495w,\n/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ede028f1638a83ae4f480cfce3ba9a4a/acfc1/gtmgauid.png\"\n            alt=\"gtm ga uid\"\n            title=\"gtm ga uid\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm ga uid</figcaption>\n  </figure></p>\n<ul>\n<li>完成後 -> 點選提交 (或是 預覽 測試後再提交)\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 761px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.31313131313131%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVQoz52Oy07EMAxF8/Xs+RHECvEBLNjAYqQRGzZUhZm+EseOm9hNM6gFIQ0S0tCrs7Luka/Rv5OnBVWdpinnrKpEWFVvKvFl/1S/7kwSTaJyjopyFItiSTiKR7IOYkzECSjuqnh93909DwbRg/cOftNbXzdQt9BZf2za94/DYF07wKGHh31/dXu8eexM1Y6WElJwSHAO0gIgeQoYeD2iJwpMmmhkMg1klhLG8at0CYDBYnAYzGlJIWbAcKH8g5nnMs+FAgP9Xy5rNsrr7NPG2d+fN8mfA7Y33IB0Z+0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/30d28ba4ac2f162672dd87efa004d21d/a805d/gtmgauidsubmit.webp 495w,\n/static/30d28ba4ac2f162672dd87efa004d21d/92222/gtmgauidsubmit.webp 761w\"\n              sizes=\"(max-width: 761px) 100vw, 761px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/30d28ba4ac2f162672dd87efa004d21d/b3db0/gtmgauidsubmit.png 495w,\n/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png 761w\"\n            sizes=\"(max-width: 761px) 100vw, 761px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/30d28ba4ac2f162672dd87efa004d21d/05d44/gtmgauidsubmit.png\"\n            alt=\"gtm ga uid submit\"\n            title=\"gtm ga uid submit\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">gtm ga uid submit</figcaption>\n  </figure></li>\n</ul>\n<p>Tag manager 非常好用，會用的話可以不透過修改線上程式碼，處理許多問題、功能。</p>\n<h2>實際模擬 UserId 設定</h2>\n<p>因為 blog 沒有會員系統，就先麻煩到我剛剛建好的頁面，是使用串接 facebook web sdk 登入。</p>\n<p>登入設定 userId : <a href=\"https://work.ianccy.com/getuid.html\" title=\"登入facebook 設定 userId\">登入 facebook 設定 userId</a></p>\n<p>進入畫面點擊登入後，我會把 facebook uId 設定到 cookie，之後我會將 cookie 的這個值，設定到 Google analytics UserId 中。</p>\n<p>因為 cookie 沒設定時間所以關掉視窗就會自動清掉了，別怕 XD。</p>\n<p>UserId google 政策小提醒:\n<code class=\"language-text\">您不會上傳任何能讓 Google 識別個人身分的資料 (例如姓名、身分證字號、電子郵件地址等任何類似資料)，或是可永久識別某裝置的資料 (例如無法重設的手機專屬裝置識別碼)。</code></p>\n<h2>Google analytics 報表</h2>\n<p>接下來打開剛剛建立好的 GA 報表，點選 目標對象 -> 客層管理，就可以看到剛剛設定好的 UserId。點擊 UserId 即可看到詳細數據。</p>\n<ul>\n<li>\n<p>UserId 清單\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.18181818181819%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVQY05XQy07DMBAFUP//77FiR1sndSB1/JpnExu5obAJQhzdhWdkj6UxMaaYMrEAsR3sxVoXPIkSS48Ii4rev8pnc4/xS0DifhvpI+NpnKb3aXta11VVAXBdtx+17jG5QB8sikjjvJzsSIjtqda6j2hHDCCxKIvmAjGEnJKqyi+ISFWZGR7M+TL4kPwSl9BTiJFYjxDi1bmYUorROTcMg7HD1XvPci8AIcMUAFnXI6WU+HhWSmmt9Z/n+RbcWbAAUt9F+0Ot9ftgXi28vKU5cCxU69b+4xNbl9Ci9Qzx2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/656c80fc7ad9cae312da246d7ad06f11/a805d/gauseridview.webp 495w,\n/static/656c80fc7ad9cae312da246d7ad06f11/6ec60/gauseridview.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/656c80fc7ad9cae312da246d7ad06f11/b3db0/gauseridview.png 495w,\n/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/656c80fc7ad9cae312da246d7ad06f11/acfc1/gauseridview.png\"\n            alt=\"ga userid view\"\n            title=\"ga userid view\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">ga userid view</figcaption>\n  </figure></p>\n</li>\n<li>\n<p>使用者紀錄\n<figure class=\"gatsby-resp-image-figure\" style=\"margin: 7vw 0;\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABC0lEQVQoz4WQXW4DMQiEff9L9Cw9RqW+dpPu+g/bGDBmXSVp39p09GmERiAQzsx2mCTnedoYw8xERIbYeStUddp85A8notZa7x0R3bT18qpv27mW5pxV9Xq9hBBU9TiOUoCYSi1jjJSSqm6XrbWqOpjJMdH71vtYwhRC+vjYjiPsuz+OcMd7H2NMMeaU4OEp5UfifAhY01pLhGPcat17D70HRM8ciSLzL/TuU/p0IQQRWWuZqUhG9KXsrXkzXIueMCc6gPIzbHMa82gNEfv6T2anSyn1fmtVVSK6fxGJSETm1CeIsCvle7PqAICcMwCUUgCA/xYRlVKcqoqciItZa73NAEC7n85PVWv9AliuB8MXK7x0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/a805d/gauseridinfo.webp 495w,\n/static/e03a2a49b60e0bc50b28b7f9459feef3/6ec60/gauseridinfo.webp 800w\"\n              sizes=\"(max-width: 800px) 100vw, 800px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/b3db0/gauseridinfo.png 495w,\n/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png 800w\"\n            sizes=\"(max-width: 800px) 100vw, 800px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e03a2a49b60e0bc50b28b7f9459feef3/acfc1/gauseridinfo.png\"\n            alt=\"ga userid info\"\n            title=\"ga userid info\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">ga userid info</figcaption>\n  </figure></p>\n</li>\n</ul>\n<p>假設你再搭配資料庫存取會員，就可以直接的看到所有會員的使用路徑，例如說，我希望看到下單的使用者，都看過哪些頁面的路徑，那你就可以依靠這方式觀察。</p>\n<h2>心得</h2>\n<p>滿詭異的，一開始報表沒出現 UserId，查網路解決方法查了很久，沒想到國外都說 ga 不會顯示 UserId…，滿臉問號。</p>\n<p>話說這功能我個人是覺得滿好用的，以前服務公司就有導入使用，可以更快理解、觀察出會員的需求，雖然聽起來滿沒有隱私，很怕被追蹤的話，記得開無痕登出瀏覽網站。</p>\n<p>感謝，有問題再歡迎留言詢問。</p>","fields":{"readingTime":{"text":"5 min read"}},"frontmatter":{"title":"Google Analytics 自訂UserId 追蹤數據","date":"June 15, 2019","description":"分享一個google analytics滿好用的功能，設定User Id，可以讓你直接在報表上找出這個使用者的flow，包括停留時間等等詳細數據，假設你搭配會員系統給予id的話，你也能夠跨裝置的追蹤數據。","categories":"marketing","tags":["google_analytics"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/dfeae9b0c0de13cd6ed25543c36e7927/06df8/google_analytics.png","srcSet":"/static/dfeae9b0c0de13cd6ed25543c36e7927/2f882/google_analytics.png 200w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/ede9b/google_analytics.png 400w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/06df8/google_analytics.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/dfeae9b0c0de13cd6ed25543c36e7927/8d68f/google_analytics.webp 200w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/1056e/google_analytics.webp 400w,\n/static/dfeae9b0c0de13cd6ed25543c36e7927/a1e0e/google_analytics.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":1280,"height":411.2}}}}},"previous":{"fields":{"slug":"/2019-06-firstjob/"},"frontmatter":{"title":"第一份工作"}},"next":{"fields":{"slug":"/2019-07-reactcontextapi/"},"frontmatter":{"title":"React Context API 跨元件傳遞資料"}}},"pageContext":{"id":"4a0f4fd6-c622-5c40-87a8-78f33334aae6","previousPostId":"38e647b7-b809-59fa-8094-06bec65be7a8","nextPostId":"627fdf55-94cf-57d2-8ea0-71a491c2a832"}},"staticQueryHashes":["3649515864","3761976949","441988385"]}